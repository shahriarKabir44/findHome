const {Table} = require('migratify/templates/Migration.class')
let newTable = new Table("submission");
newTable.setID('id');
newTable.addColumn('time','DOUBLE')
	.setNullable(true)
	 .setDefaultValue('')
	 .setUnique(false)
newTable.addColumn('verdict','VARCHAR(10)')
	.setNullable(true)
	 .setDefaultValue('')
	 .setUnique(false)
newTable.addColumn('execTime','VARCHAR(10)')
	.setNullable(true)
	 .setDefaultValue('')
	 .setUnique(false)
newTable.addColumn('language','VARCHAR(10)')
	.setNullable(true)
	 .setDefaultValue('')
	 .setUnique(false)
newTable.addColumn('submissionFileURL','MEDIUMTEXT')
	.setNullable(true)
	 .setDefaultValue('')
	 .setUnique(false)
newTable.addColumn('problemId','INT')
	.setNullable(true)
	 .setDefaultValue('')
	 .setUnique(false)
newTable.addColumn('submittedBy','INT')
	.setNullable(true)
	 .setDefaultValue('')
	 .setUnique(false)
newTable.addColumn('contestId','INT')
	.setNullable(true)
	 .setDefaultValue('')
	 .setUnique(false)
newTable.addColumn('errorMessage','MEDIUMTEXT')
	.setNullable(true)
	 .setDefaultValue('')
	 .setUnique(false)
newTable.addColumn('isOfficial','INT')
	.setNullable(true)
	 .setDefaultValue('')
	 .setUnique(false)
newTable.addForeignKey('problemId','problem','id');
newTable.addForeignKey('submittedBy','user','id');
newTable.addForeignKey('contestId','contest','id');
newTable.addForeignKey('problemId','problem','id');
newTable.addForeignKey('submittedBy','user','id');
newTable.addForeignKey('contestId','contest','id');
module.exports = async () => {
	newTable.create()
}